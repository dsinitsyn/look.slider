!function(e){var t={col:1,dotted:!1,swipe:!0,arrows:!0,duration:500,carousel:!0,autoslide:2e3,animation:"ribbon"},i={init:function(i,n){var s=this;s.$slider=e(i),s.settings=e.extend({},t,s.$slider.data(),n),s.$wrapper=s.createWrapper(),s.$slides=s.assignSlides(),s.$slides.length>1&&s.setup(),s.setActiveSlide(s.$slides.first())},setup:function(){var e=this;e.assignSlidesOrder(),1==e.settings.arrows&&e.initArrows(),1==e.settings.dotted&&e.initDots(),1==e.settings.swipe&&e.initSwipe(),"number"==typeof e.settings.autoslide&&e.initAutoslide(),0==e.settings.carousel&&e.$slider.on("activeSlideChanged",function(){e.toggleArrowState()})},initSwipe:function(){var t=this;t.$slider.swipe=function(t,i){function n(){1==event.touches.length&&(a=event.touches[0].pageX,l=!0,r.on("touchmove",d))}function s(){r.off("touchmove"),l=!1,a=null}function d(){if(l){var e=event.touches[0].pageX,n=a-e;Math.abs(n)>=30&&(n>0&&"left"==t?i():n<0&&"right"==t&&i(),s())}event.preventDefault()}var a,r=e(this),l=!1;r.on("touchstart",n)},t.$slider.swipe("right",function(){t.bindDirectionClick("prev")}),t.$slider.swipe("left",function(){t.bindDirectionClick("next")})},initArrows:function(){var t=this;t.$nextBtn=e("<button/>",{addClass:"slider_next-btn",type:"button"}).click(function(){t.bindDirectionClick("next")}),t.$prevBtn=e("<button/>",{addClass:"slider_prev-btn",type:"button"}).click(function(){t.bindDirectionClick("prev")}),t.$slider.append(t.$nextBtn,t.$prevBtn)},initDots:function(){var t=this;t.$dotsList=e("<div/>",{addClass:"slider_dots"}).appendTo(t.$slider),t.$slides.each(function(i){e("<button/>",{addClass:"slider_dot-btn",type:"button"}).data("slideIndex",i).appendTo(t.$dotsList)}),t.$dots=t.$slider.find(".slider_dot-btn"),t.$slider.on("activeSlideChanged",function(){t.$dots.removeClass("-active").filter(function(){return t.$activeSlide.index()==e(this).data("slideIndex")}).addClass("-active")}),t.$dots.click(function(i){t.bindDotClick(e(this))})},initAutoslide:function(){var e=this,t=setInterval(function(){var t=e.$activeSlide.data("nextIndex");e.goToSlide(t,"next")},e.settings.autoslide);e.$prevBtn.add(e.$nextBtn).add(e.$dots).one("click.clearInterval",function(){clearInterval(t)}),e.$slider.one("touchstart.clearInterval",function(){clearInterval(t)})},bindDotClick:function(e){var t=this,i=e.data("slideIndex");i>t.$activeSlide.index()?t.goToSlide(i,"next"):i<t.$activeSlide.index()&&t.goToSlide(i,"prev")},bindDirectionClick:function(e){var t=this,i=t.$activeSlide.data(e+"Index");t.goToSlide(i,e)},goToSlide:function(e,t){var i=this;if(!i.isAnimate&&e<=i.$slides.length){if(i.isAnimate=!0,i.$nextSlide=i.$slides.eq(e),"next"==t)var n="-100%",s="100%";else if("prev"==t)var n="100%",s="-100%";switch(i.settings.animation){case"ribbon":i.$activeSlide.css({zIndex:1}).animate({left:n},i.settings.duration),i.$nextSlide.css({left:s,zIndex:2}).animate({left:0},i.settings.duration,function(){i.$activeSlide.finish(),i.setActiveSlide(i.$nextSlide),i.isAnimate=!1});break;case"fade":i.$activeSlide.css({zIndex:1}),i.$nextSlide.css({opacity:0,zIndex:2}).animate({opacity:1},i.settings.diration,function(){i.setActiveSlide(i.$nextSlide),i.isAnimate=!1})}}},setActiveSlide:function(t){var i=this,n=e(t);i.$slides.removeClass("-active").removeAttr("style"),i.$activeSlide=n.addClass("-active"),i.$slider.trigger("activeSlideChanged",[i.$activeSlide])},toggleArrowState:function(){var e=this;return"undefined"==typeof e.$nextSlide?(e.$prevBtn.prop("disabled",!0),!1):(e.$nextSlide.is(e.$slides.last())?e.$nextBtn.prop("disabled",!0):e.$nextBtn.prop("disabled",!1),void(e.$nextSlide.is(e.$slides.first())?e.$prevBtn.prop("disabled",!0):e.$prevBtn.prop("disabled",!1)))},assignSlides:function(){var e=this;if(1!=e.settings.col)for(var t=e.$wrapper.children("*"),i=0;i<t.length;i+=e.settings.col)t.slice(i,i+e.settings.col).wrapAll("<div class='slide'></div>");return e.$wrapper.children(".slide")},assignSlidesOrder:function(){var t=this;t.$slides.each(function(i,n){var s=e(n);i==t.$slides.length-1?s.data("nextIndex",0):s.data("nextIndex",i+1),0==i?s.data("prevIndex",t.$slides.length-1):s.data("prevIndex",i-1)})},createWrapper:function(e){var t=this;return t.$slider.wrapInner('<div class="slider_wrapper"></div>'),t.$slider.find(".slider_wrapper")},reinit:function(t){e(this)}};e.fn.lookSlider=function(t){return i[t]?i[t].apply(this.data("lookSlider"),Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):this.each(function(){var n=Object.create(i);n.init(this,t),e.data(this,"lookSlider",n)})}}(jQuery),function(e){e(".slider").lookSlider()}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRlZmF1bHRzIiwiY29sIiwiZG90dGVkIiwic3dpcGUiLCJhcnJvd3MiLCJkdXJhdGlvbiIsImNhcm91c2VsIiwiYXV0b3NsaWRlIiwiYW5pbWF0aW9uIiwibWV0aG9kcyIsImluaXQiLCJzbGlkZXIiLCJvcHRpb25zIiwic2VsZiIsInRoaXMiLCIkc2xpZGVyIiwic2V0dGluZ3MiLCJleHRlbmQiLCJkYXRhIiwiJHdyYXBwZXIiLCJjcmVhdGVXcmFwcGVyIiwiJHNsaWRlcyIsImFzc2lnblNsaWRlcyIsImxlbmd0aCIsInNldHVwIiwic2V0QWN0aXZlU2xpZGUiLCJmaXJzdCIsImFzc2lnblNsaWRlc09yZGVyIiwiaW5pdEFycm93cyIsImluaXREb3RzIiwiaW5pdFN3aXBlIiwiaW5pdEF1dG9zbGlkZSIsIm9uIiwidG9nZ2xlQXJyb3dTdGF0ZSIsImRpcmVjdGlvbiIsImNhbGxiYWNrIiwic3RhcnRTd2lwZSIsImV2ZW50IiwidG91Y2hlcyIsInN0YXJ0IiwicGFnZVgiLCJpc1RvdWNoaW5nIiwiJHRoaXMiLCJlbmRTd2lwZSIsIm9mZiIsImN1cnJlbnQiLCJkZWx0YSIsIk1hdGgiLCJhYnMiLCJwcmV2ZW50RGVmYXVsdCIsImJpbmREaXJlY3Rpb25DbGljayIsIiRuZXh0QnRuIiwiYWRkQ2xhc3MiLCJ0eXBlIiwiY2xpY2siLCIkcHJldkJ0biIsImFwcGVuZCIsIiRkb3RzTGlzdCIsImFwcGVuZFRvIiwiZWFjaCIsImluZGV4IiwiJGRvdHMiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJmaWx0ZXIiLCIkYWN0aXZlU2xpZGUiLCJiaW5kRG90Q2xpY2siLCJhdXRvc2xpZGVJbnRlcnZhbCIsInNldEludGVydmFsIiwic2xpZGVJbmRleCIsImdvVG9TbGlkZSIsImFkZCIsIm9uZSIsImNsZWFySW50ZXJ2YWwiLCIkZG90IiwiaXNBbmltYXRlIiwiJG5leHRTbGlkZSIsImVxIiwiY3NzQWN0aXZlTGVmdCIsImNzc05leHRMZWZ0IiwiY3NzIiwiekluZGV4IiwiYW5pbWF0ZSIsImxlZnQiLCJmaW5pc2giLCJvcGFjaXR5IiwiZGlyYXRpb24iLCJzbGlkZSIsIiRzbGlkZSIsInJlbW92ZUF0dHIiLCJ0cmlnZ2VyIiwicHJvcCIsImlzIiwibGFzdCIsIiRlbGVtZW50cyIsImNoaWxkcmVuIiwiaSIsInNsaWNlIiwid3JhcEFsbCIsImNsYXNzTmFtZSIsIndyYXBJbm5lciIsInJlaW5pdCIsInBhcmFtcyIsImZuIiwibG9va1NsaWRlciIsIm1ldGhvZCIsImFwcGx5IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJjYWxsIiwiYXJndW1lbnRzIiwiZXJyb3IiLCJPYmplY3QiLCJjcmVhdGUiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEdBQ0EsR0FBQUMsSUFDQUMsSUFBQSxFQUNBQyxRQUFBLEVBQ0FDLE9BQUEsRUFDQUMsUUFBQSxFQUNBQyxTQUFBLElBQ0FDLFVBQUEsRUFDQUMsVUFBQSxJQUNBQyxVQUFBLFVBR0FDLEdBQ0FDLEtBQUEsU0FBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxJQUNBRCxHQUFBRSxRQUFBaEIsRUFBQVksR0FDQUUsRUFBQUcsU0FBQWpCLEVBQUFrQixVQUFBakIsRUFBQWEsRUFBQUUsUUFBQUcsT0FBQU4sR0FDQUMsRUFBQU0sU0FBQU4sRUFBQU8sZ0JBQ0FQLEVBQUFRLFFBQUFSLEVBQUFTLGVBRUFULEVBQUFRLFFBQUFFLE9BQUEsR0FBQVYsRUFBQVcsUUFDQVgsRUFBQVksZUFBQVosRUFBQVEsUUFBQUssVUFHQUYsTUFBQSxXQUNBLEdBQUFYLEdBQUFDLElBRUFELEdBQUFjLG9CQUdBLEdBQUFkLEVBQUFHLFNBQUFaLFFBQ0FTLEVBQUFlLGFBSUEsR0FBQWYsRUFBQUcsU0FBQWQsUUFDQVcsRUFBQWdCLFdBSUEsR0FBQWhCLEVBQUFHLFNBQUFiLE9BQ0FVLEVBQUFpQixZQUlBLGdCQUFBakIsR0FBQUcsU0FBQVQsV0FDQU0sRUFBQWtCLGdCQUlBLEdBQUFsQixFQUFBRyxTQUFBVixVQUNBTyxFQUFBRSxRQUFBaUIsR0FBQSxxQkFBQSxXQUNBbkIsRUFBQW9CLHNCQUtBSCxVQUFBLFdBQ0EsR0FBQWpCLEdBQUFDLElBR0FELEdBQUFFLFFBQUFaLE1BQUEsU0FBQStCLEVBQUFDLEdBT0EsUUFBQUMsS0FDQSxHQUFBQyxNQUFBQyxRQUFBZixTQUNBZ0IsRUFBQUYsTUFBQUMsUUFBQSxHQUFBRSxNQUNBQyxHQUFBLEVBQ0FDLEVBQUFWLEdBQUEsWUFBQTdCLElBSUEsUUFBQXdDLEtBQ0FELEVBQUFFLElBQUEsYUFDQUgsR0FBQSxFQUNBRixFQUFBLEtBR0EsUUFBQXBDLEtBQ0EsR0FBQXNDLEVBQUEsQ0FDQSxHQUFBSSxHQUFBUixNQUFBQyxRQUFBLEdBQUFFLE1BQ0FNLEVBQUFQLEVBQUFNLENBRUFFLE1BQUFDLElBQUFGLElBQUEsS0FFQUEsRUFBQSxHQUFBLFFBQUFaLEVBQ0FDLElBQ0FXLEVBQUEsR0FBQSxTQUFBWixHQUNBQyxJQUVBUSxLQUdBTixNQUFBWSxpQkFuQ0EsR0FFQVYsR0FGQUcsRUFBQTNDLEVBQUFlLE1BQ0EyQixHQUFBLENBR0FDLEdBQUFWLEdBQUEsYUFBQUksSUFvQ0F2QixFQUFBRSxRQUFBWixNQUFBLFFBQUEsV0FDQVUsRUFBQXFDLG1CQUFBLFVBR0FyQyxFQUFBRSxRQUFBWixNQUFBLE9BQUEsV0FDQVUsRUFBQXFDLG1CQUFBLFdBSUF0QixXQUFBLFdBQ0EsR0FBQWYsR0FBQUMsSUFFQUQsR0FBQXNDLFNBQUFwRCxFQUFBLGFBQ0FxRCxTQUFBLGtCQUNBQyxLQUFBLFdBQ0FDLE1BQUEsV0FDQXpDLEVBQUFxQyxtQkFBQSxVQUdBckMsRUFBQTBDLFNBQUF4RCxFQUFBLGFBQ0FxRCxTQUFBLGtCQUNBQyxLQUFBLFdBQ0FDLE1BQUEsV0FDQXpDLEVBQUFxQyxtQkFBQSxVQUdBckMsRUFBQUUsUUFBQXlDLE9BQUEzQyxFQUFBc0MsU0FBQXRDLEVBQUEwQyxXQUdBMUIsU0FBQSxXQUNBLEdBQUFoQixHQUFBQyxJQUVBRCxHQUFBNEMsVUFBQTFELEVBQUEsVUFDQXFELFNBQUEsZ0JBQ0FNLFNBQUE3QyxFQUFBRSxTQUdBRixFQUFBUSxRQUFBc0MsS0FBQSxTQUFBQyxHQUVBN0QsRUFBQSxhQUNBcUQsU0FBQSxpQkFDQUMsS0FBQSxXQUNBbkMsS0FBQSxhQUFBMEMsR0FDQUYsU0FBQTdDLEVBQUE0QyxhQUdBNUMsRUFBQWdELE1BQUFoRCxFQUFBRSxRQUFBK0MsS0FBQSxtQkFHQWpELEVBQUFFLFFBQUFpQixHQUFBLHFCQUFBLFdBRUFuQixFQUFBZ0QsTUFBQUUsWUFBQSxXQUNBQyxPQUFBLFdBQ0EsTUFBQW5ELEdBQUFvRCxhQUFBTCxTQUFBN0QsRUFBQWUsTUFBQUksS0FBQSxnQkFDQWtDLFNBQUEsYUFLQXZDLEVBQUFnRCxNQUFBUCxNQUFBLFNBQUFqQixHQUNBeEIsRUFBQXFELGFBQUFuRSxFQUFBZSxVQUlBaUIsY0FBQSxXQUNBLEdBQUFsQixHQUFBQyxLQUVBcUQsRUFBQUMsWUFBQSxXQUVBLEdBQUFDLEdBQUF4RCxFQUFBb0QsYUFBQS9DLEtBQUEsWUFDQUwsR0FBQXlELFVBQUFELEVBQUEsU0FFQXhELEVBQUFHLFNBQUFULFVBRUFNLEdBQUEwQyxTQUFBZ0IsSUFBQTFELEVBQUFzQyxVQUFBb0IsSUFBQTFELEVBQUFnRCxPQUFBVyxJQUFBLHNCQUFBLFdBQ0FDLGNBQUFOLEtBR0F0RCxFQUFBRSxRQUFBeUQsSUFBQSwyQkFBQSxXQUNBQyxjQUFBTixNQUlBRCxhQUFBLFNBQUFRLEdBQ0EsR0FBQTdELEdBQUFDLEtBQ0F1RCxFQUFBSyxFQUFBeEQsS0FBQSxhQUVBbUQsR0FBQXhELEVBQUFvRCxhQUFBTCxRQUNBL0MsRUFBQXlELFVBQUFELEVBQUEsUUFFQUEsRUFBQXhELEVBQUFvRCxhQUFBTCxTQUNBL0MsRUFBQXlELFVBQUFELEVBQUEsU0FJQW5CLG1CQUFBLFNBQUFoQixHQUNBLEdBQUFyQixHQUFBQyxLQUNBdUQsRUFBQXhELEVBQUFvRCxhQUFBL0MsS0FBQWdCLEVBQUEsUUFFQXJCLEdBQUF5RCxVQUFBRCxFQUFBbkMsSUFHQW9DLFVBQUEsU0FBQUQsRUFBQW5DLEdBQ0EsR0FBQXJCLEdBQUFDLElBR0EsS0FBQUQsRUFBQThELFdBQUFOLEdBQUF4RCxFQUFBUSxRQUFBRSxPQUFBLENBTUEsR0FKQVYsRUFBQThELFdBQUEsRUFDQTlELEVBQUErRCxXQUFBL0QsRUFBQVEsUUFBQXdELEdBQUFSLEdBR0EsUUFBQW5DLEVBRUEsR0FBQTRDLEdBQUEsUUFDQUMsRUFBQSxXQUVBLElBQUEsUUFBQTdDLEVBRUEsR0FBQTRDLEdBQUEsT0FDQUMsRUFBQSxPQUdBLFFBQUFsRSxFQUFBRyxTQUFBUixXQUNBLElBQUEsU0FDQUssRUFBQW9ELGFBQUFlLEtBQUFDLE9BQUEsSUFDQUMsU0FBQUMsS0FBQUwsR0FBQWpFLEVBQUFHLFNBQUFYLFVBRUFRLEVBQUErRCxXQUFBSSxLQUFBRyxLQUFBSixFQUFBRSxPQUFBLElBQ0FDLFNBQUFDLEtBQUEsR0FBQXRFLEVBQUFHLFNBQUFYLFNBQUEsV0FDQVEsRUFBQW9ELGFBQUFtQixTQUNBdkUsRUFBQVksZUFBQVosRUFBQStELFlBQ0EvRCxFQUFBOEQsV0FBQSxHQUVBLE1BQ0EsS0FBQSxPQUNBOUQsRUFBQW9ELGFBQUFlLEtBQUFDLE9BQUEsSUFFQXBFLEVBQUErRCxXQUFBSSxLQUFBSyxRQUFBLEVBQUFKLE9BQUEsSUFDQUMsU0FBQUcsUUFBQSxHQUFBeEUsRUFBQUcsU0FBQXNFLFNBQUEsV0FDQXpFLEVBQUFZLGVBQUFaLEVBQUErRCxZQUNBL0QsRUFBQThELFdBQUEsT0FPQWxELGVBQUEsU0FBQThELEdBQ0EsR0FBQTFFLEdBQUFDLEtBQ0EwRSxFQUFBekYsRUFBQXdGLEVBRUExRSxHQUFBUSxRQUFBMEMsWUFBQSxXQUFBMEIsV0FBQSxTQUNBNUUsRUFBQW9ELGFBQUF1QixFQUFBcEMsU0FBQSxXQUNBdkMsRUFBQUUsUUFBQTJFLFFBQUEsc0JBQUE3RSxFQUFBb0QsZ0JBR0FoQyxpQkFBQSxXQUNBLEdBQUFwQixHQUFBQyxJQUVBLE9BQUEsbUJBQUFELEdBQUErRCxZQUNBL0QsRUFBQTBDLFNBQUFvQyxLQUFBLFlBQUEsSUFDQSxJQUdBOUUsRUFBQStELFdBQUFnQixHQUFBL0UsRUFBQVEsUUFBQXdFLFFBQ0FoRixFQUFBc0MsU0FBQXdDLEtBQUEsWUFBQSxHQUNBOUUsRUFBQXNDLFNBQUF3QyxLQUFBLFlBQUEsUUFHQTlFLEVBQUErRCxXQUFBZ0IsR0FBQS9FLEVBQUFRLFFBQUFLLFNBQ0FiLEVBQUEwQyxTQUFBb0MsS0FBQSxZQUFBLEdBQ0E5RSxFQUFBMEMsU0FBQW9DLEtBQUEsWUFBQSxNQUdBckUsYUFBQSxXQUNBLEdBQUFULEdBQUFDLElBRUEsSUFBQSxHQUFBRCxFQUFBRyxTQUFBZixJQUlBLElBQUEsR0FGQTZGLEdBQUFqRixFQUFBTSxTQUFBNEUsU0FBQSxLQUVBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUF2RSxPQUFBeUUsR0FBQW5GLEVBQUFHLFNBQUFmLElBQ0E2RixFQUFBRyxNQUFBRCxFQUFBQSxFQUFBbkYsRUFBQUcsU0FBQWYsS0FBQWlHLFFBQUEsNEJBSUEsT0FBQXJGLEdBQUFNLFNBQUE0RSxTQUFBLFdBR0FwRSxrQkFBQSxXQUNBLEdBQUFkLEdBQUFDLElBRUFELEdBQUFRLFFBQUFzQyxLQUFBLFNBQUFDLEVBQUEyQixHQUNBLEdBQUFDLEdBQUF6RixFQUFBd0YsRUFFQTNCLElBQUEvQyxFQUFBUSxRQUFBRSxPQUFBLEVBQ0FpRSxFQUFBdEUsS0FBQSxZQUFBLEdBQ0FzRSxFQUFBdEUsS0FBQSxZQUFBMEMsRUFBQSxHQUVBLEdBQUFBLEVBQ0E0QixFQUFBdEUsS0FBQSxZQUFBTCxFQUFBUSxRQUFBRSxPQUFBLEdBQ0FpRSxFQUFBdEUsS0FBQSxZQUFBMEMsRUFBQSxNQUtBeEMsY0FBQSxTQUFBK0UsR0FDQSxHQUFBdEYsR0FBQUMsSUFHQSxPQUZBRCxHQUFBRSxRQUFBcUYsVUFBQSxzQ0FFQXZGLEVBQUFFLFFBQUErQyxLQUFBLG9CQUdBdUMsT0FBQSxTQUFBQyxHQUNBdkcsRUFBQWUsT0ErQkFmLEdBQUF3RyxHQUFBQyxXQUFBLFNBQUFDLEdBRUEsTUFBQWhHLEdBQUFnRyxHQUNBaEcsRUFBQWdHLEdBQUFDLE1BQUE1RixLQUFBSSxLQUFBLGNBQUF5RixNQUFBQyxVQUFBWCxNQUFBWSxLQUFBQyxVQUFBLElBRUEsZ0JBQUFMLElBQUFBLE1BUUExRyxHQUFBZ0gsTUFBQSxVQUFBTixFQUFBLG1CQVBBM0YsS0FBQTZDLEtBQUEsV0FDQSxHQUFBaEQsR0FBQXFHLE9BQUFDLE9BQUF4RyxFQUNBRSxHQUFBRCxLQUFBSSxLQUFBMkYsR0FDQTFHLEVBQUFtQixLQUFBSixLQUFBLGFBQUFILE9BUUF1RyxRQzNXQSxTQUFBbkgsR0FFQUEsRUFBQSxXQUFBeUcsY0FFQVUiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiggJCApIHtcbiAgICB2YXIgZGVmYXVsdHMgPXtcbiAgICAgICAgY29sOiAxLFxuICAgICAgICBkb3R0ZWQ6IGZhbHNlLFxuICAgICAgICBzd2lwZTogdHJ1ZSxcbiAgICAgICAgYXJyb3dzOiB0cnVlLFxuICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICBjYXJvdXNlbDogdHJ1ZSxcbiAgICAgICAgYXV0b3NsaWRlOiAyMDAwLFxuICAgICAgICBhbmltYXRpb246ICdyaWJib24nIC8vcmliYm9uLCBmYWRlXG4gICAgfVxuXG4gICAgdmFyIG1ldGhvZHMgPSB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNsaWRlciwgb3B0aW9ucyl7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBzZWxmLiRzbGlkZXIgPSAkKHNsaWRlcik7XG4gICAgICAgICAgICBzZWxmLnNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBzZWxmLiRzbGlkZXIuZGF0YSgpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHNlbGYuJHdyYXBwZXIgPSBzZWxmLmNyZWF0ZVdyYXBwZXIoKTtcbiAgICAgICAgICAgIHNlbGYuJHNsaWRlcyA9IHNlbGYuYXNzaWduU2xpZGVzKCk7XG5cbiAgICAgICAgICAgIChzZWxmLiRzbGlkZXMubGVuZ3RoID4gMSkgJiYgc2VsZi5zZXR1cCgpO1xuICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVTbGlkZSggc2VsZi4kc2xpZGVzLmZpcnN0KCkgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgc2VsZi5hc3NpZ25TbGlkZXNPcmRlcigpO1xuXG4gICAgICAgICAgICAvL2luaXQgYXJvd3NcbiAgICAgICAgICAgIGlmIChzZWxmLnNldHRpbmdzLmFycm93cyA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICBzZWxmLmluaXRBcnJvd3MoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9pbml0IGRvdHNcbiAgICAgICAgICAgIGlmIChzZWxmLnNldHRpbmdzLmRvdHRlZCA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICBzZWxmLmluaXREb3RzKCk7XG4gICAgICAgICAgICB9ICAgIFxuXG4gICAgICAgICAgICAvL2luaXQgc3dpcGVcbiAgICAgICAgICAgIGlmIChzZWxmLnNldHRpbmdzLnN3aXBlID09IHRydWUpe1xuICAgICAgICAgICAgICAgIHNlbGYuaW5pdFN3aXBlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vaW5pdCBhdXRvc2xpZGVcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZi5zZXR0aW5ncy5hdXRvc2xpZGUgPT0gJ251bWJlcicpe1xuICAgICAgICAgICAgICAgIHNlbGYuaW5pdEF1dG9zbGlkZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2Rpc2FibGUgYXJyb3dzIGlmIGxhc3QvZmlyc3Qgc2xpZGVcbiAgICAgICAgICAgIGlmIChzZWxmLnNldHRpbmdzLmNhcm91c2VsID09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICBzZWxmLiRzbGlkZXIub24oJ2FjdGl2ZVNsaWRlQ2hhbmdlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudG9nZ2xlQXJyb3dTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRTd2lwZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgLy9kZXNjcmliZSBzd2lwZSBldmVudFxuICAgICAgICAgICAgc2VsZi4kc2xpZGVyLnN3aXBlID0gZnVuY3Rpb24oZGlyZWN0aW9uLCBjYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgaXNUb3VjaGluZyA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBzdGFydDtcblxuICAgICAgICAgICAgICAgICR0aGlzLm9uKCd0b3VjaHN0YXJ0Jywgc3RhcnRTd2lwZSk7ICBcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN0YXJ0U3dpcGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1RvdWNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLm9uKCd0b3VjaG1vdmUnLCBzd2lwZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlbmRTd2lwZSgpe1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5vZmYoJ3RvdWNobW92ZScpO1xuICAgICAgICAgICAgICAgICAgICBpc1RvdWNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9ICAgXG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzd2lwZSgpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNUb3VjaGluZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVgsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IHN0YXJ0IC0gY3VycmVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRlbHRhKSA+PSAzMCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEgPiAwICYmIGRpcmVjdGlvbiA9PSAnbGVmdCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmIChkZWx0YSA8IDAgICYmIGRpcmVjdGlvbiA9PSAncmlnaHQnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kU3dpcGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9iaW5kIHN3aXBlc1xuICAgICAgICAgICAgc2VsZi4kc2xpZGVyLnN3aXBlKCdyaWdodCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgc2VsZi5iaW5kRGlyZWN0aW9uQ2xpY2soJ3ByZXYnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZWxmLiRzbGlkZXIuc3dpcGUoJ2xlZnQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHNlbGYuYmluZERpcmVjdGlvbkNsaWNrKCduZXh0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0QXJyb3dzOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICBcbiAgICAgICAgICAgIHNlbGYuJG5leHRCdG4gPSAkKCc8YnV0dG9uLz4nLHtcbiAgICAgICAgICAgICAgICBhZGRDbGFzczogJ3NsaWRlcl9uZXh0LWJ0bicsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbidcbiAgICAgICAgICAgIH0pLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgc2VsZi5iaW5kRGlyZWN0aW9uQ2xpY2soJ25leHQnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZWxmLiRwcmV2QnRuID0gJCgnPGJ1dHRvbi8+Jyx7XG4gICAgICAgICAgICAgICAgYWRkQ2xhc3M6ICdzbGlkZXJfcHJldi1idG4nLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdidXR0b24nXG4gICAgICAgICAgICB9KS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHNlbGYuYmluZERpcmVjdGlvbkNsaWNrKCdwcmV2Jyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2VsZi4kc2xpZGVyLmFwcGVuZCggc2VsZi4kbmV4dEJ0biwgc2VsZi4kcHJldkJ0biApO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXREb3RzOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLiRkb3RzTGlzdCA9ICQoJzxkaXYvPicse1xuICAgICAgICAgICAgICAgIGFkZENsYXNzOiAnc2xpZGVyX2RvdHMnXG4gICAgICAgICAgICB9KS5hcHBlbmRUbyggc2VsZi4kc2xpZGVyICk7XG5cbiAgICAgICAgICAgIC8vY3JlYXRlIGRvdHNcbiAgICAgICAgICAgIHNlbGYuJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XG5cbiAgICAgICAgICAgICAgICAkKCc8YnV0dG9uLz4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzOiAnc2xpZGVyX2RvdC1idG4nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJ1xuICAgICAgICAgICAgICAgIH0pLmRhdGEoJ3NsaWRlSW5kZXgnLCBpbmRleClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKHNlbGYuJGRvdHNMaXN0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZWxmLiRkb3RzID0gc2VsZi4kc2xpZGVyLmZpbmQoJy5zbGlkZXJfZG90LWJ0bicpO1xuXG4gICAgICAgICAgICAvL3RvZ2dsZSBhY3RpdmUgZG90XG4gICAgICAgICAgICBzZWxmLiRzbGlkZXIub24oJ2FjdGl2ZVNsaWRlQ2hhbmdlZCcsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICBzZWxmLiRkb3RzLnJlbW92ZUNsYXNzKCctYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuJGFjdGl2ZVNsaWRlLmluZGV4KCkgPT0gJCh0aGlzKS5kYXRhKCdzbGlkZUluZGV4Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0pLmFkZENsYXNzKCctYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL2RvdCBiaW5kaW5nXG4gICAgICAgICAgICBzZWxmLiRkb3RzLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5iaW5kRG90Q2xpY2soICQodGhpcykgKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdEF1dG9zbGlkZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGF1dG9zbGlkZUludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsgIFxuXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlSW5kZXggPSBzZWxmLiRhY3RpdmVTbGlkZS5kYXRhKCduZXh0SW5kZXgnKTtcbiAgICAgICAgICAgICAgICBzZWxmLmdvVG9TbGlkZSggc2xpZGVJbmRleCwgJ25leHQnICk7XG5cbiAgICAgICAgICAgIH0sIHNlbGYuc2V0dGluZ3MuYXV0b3NsaWRlKTtcblxuICAgICAgICAgICAgc2VsZi4kcHJldkJ0bi5hZGQoc2VsZi4kbmV4dEJ0bikuYWRkKHNlbGYuJGRvdHMpLm9uZSgnY2xpY2suY2xlYXJJbnRlcnZhbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChhdXRvc2xpZGVJbnRlcnZhbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2VsZi4kc2xpZGVyLm9uZSgndG91Y2hzdGFydC5jbGVhckludGVydmFsJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGF1dG9zbGlkZUludGVydmFsKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG5cbiAgICAgICAgYmluZERvdENsaWNrOiBmdW5jdGlvbiggJGRvdCApe1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHNsaWRlSW5kZXggPSAkZG90LmRhdGEoJ3NsaWRlSW5kZXgnKTtcblxuICAgICAgICAgICAgaWYgKCBzbGlkZUluZGV4ID4gc2VsZi4kYWN0aXZlU2xpZGUuaW5kZXgoKSApe1xuICAgICAgICAgICAgICAgIHNlbGYuZ29Ub1NsaWRlKHNsaWRlSW5kZXgsICduZXh0Jyk7XG5cbiAgICAgICAgICAgIH1lbHNlIGlmICggc2xpZGVJbmRleCA8IHNlbGYuJGFjdGl2ZVNsaWRlLmluZGV4KCkgKXtcbiAgICAgICAgICAgICAgICBzZWxmLmdvVG9TbGlkZShzbGlkZUluZGV4LCAncHJldicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGJpbmREaXJlY3Rpb25DbGljazogZnVuY3Rpb24oZGlyZWN0aW9uKXtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICBzbGlkZUluZGV4ID0gc2VsZi4kYWN0aXZlU2xpZGUuZGF0YShkaXJlY3Rpb24rJ0luZGV4Jyk7XG5cbiAgICAgICAgICAgIHNlbGYuZ29Ub1NsaWRlKCBzbGlkZUluZGV4LCBkaXJlY3Rpb24gKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnb1RvU2xpZGU6IGZ1bmN0aW9uKHNsaWRlSW5kZXgsIGRpcmVjdGlvbil7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cblxuICAgICAgICAgICAgaWYgKCFzZWxmLmlzQW5pbWF0ZSAmJiBzbGlkZUluZGV4IDw9IHNlbGYuJHNsaWRlcy5sZW5ndGgpe1xuXG4gICAgICAgICAgICAgICAgc2VsZi5pc0FuaW1hdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNlbGYuJG5leHRTbGlkZSA9IHNlbGYuJHNsaWRlcy5lcSggc2xpZGVJbmRleCApO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09ICduZXh0Jyl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNzc0FjdGl2ZUxlZnQgPSBcIi0xMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NOZXh0TGVmdCA9IFwiMTAwJVwiO1xuXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYgKGRpcmVjdGlvbiA9PSAncHJldicpe1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjc3NBY3RpdmVMZWZ0ID0gXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NOZXh0TGVmdCA9IFwiLTEwMCVcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2goIHNlbGYuc2V0dGluZ3MuYW5pbWF0aW9uICl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JpYmJvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRhY3RpdmVTbGlkZS5jc3Moe3pJbmRleDogMX0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoe2xlZnQ6IGNzc0FjdGl2ZUxlZnR9LCBzZWxmLnNldHRpbmdzLmR1cmF0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kbmV4dFNsaWRlLmNzcyh7bGVmdDogY3NzTmV4dExlZnQsIHpJbmRleDogMn0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoe2xlZnQ6IDB9LCBzZWxmLnNldHRpbmdzLmR1cmF0aW9uLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRhY3RpdmVTbGlkZS5maW5pc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVTbGlkZSggc2VsZi4kbmV4dFNsaWRlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNBbmltYXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmYWRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJGFjdGl2ZVNsaWRlLmNzcyh7ekluZGV4OiAxfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJG5leHRTbGlkZS5jc3Moe29wYWNpdHk6IDAsIHpJbmRleDogMn0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoe29wYWNpdHk6IDF9LCBzZWxmLnNldHRpbmdzLmRpcmF0aW9uLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldEFjdGl2ZVNsaWRlKCBzZWxmLiRuZXh0U2xpZGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pc0FuaW1hdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldEFjdGl2ZVNsaWRlOiBmdW5jdGlvbiggc2xpZGUgKXtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICAkc2xpZGUgPSAkKHNsaWRlKTtcblxuICAgICAgICAgICAgc2VsZi4kc2xpZGVzLnJlbW92ZUNsYXNzKCctYWN0aXZlJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgIHNlbGYuJGFjdGl2ZVNsaWRlID0gJHNsaWRlLmFkZENsYXNzKCctYWN0aXZlJyk7XG4gICAgICAgICAgICBzZWxmLiRzbGlkZXIudHJpZ2dlcignYWN0aXZlU2xpZGVDaGFuZ2VkJywgW3NlbGYuJGFjdGl2ZVNsaWRlXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlQXJyb3dTdGF0ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxmLiRuZXh0U2xpZGUgPT0gJ3VuZGVmaW5lZCcpe1xuICAgICAgICAgICAgICAgIHNlbGYuJHByZXZCdG4ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIChzZWxmLiRuZXh0U2xpZGUuaXMoIHNlbGYuJHNsaWRlcy5sYXN0KCkgKSApXG4gICAgICAgICAgICAgICAgPyBzZWxmLiRuZXh0QnRuLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgICAgICAgICA6IHNlbGYuJG5leHRCdG4ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgKHNlbGYuJG5leHRTbGlkZS5pcyggc2VsZi4kc2xpZGVzLmZpcnN0KCkgKSApXG4gICAgICAgICAgICAgICAgPyBzZWxmLiRwcmV2QnRuLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgICAgICAgICA6IHNlbGYuJHByZXZCdG4ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYXNzaWduU2xpZGVzOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoc2VsZi5zZXR0aW5ncy5jb2wgIT0gMSl7XG5cbiAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnRzID0gc2VsZi4kd3JhcHBlci5jaGlsZHJlbignKicpO1xuXG4gICAgICAgICAgICAgICAgZm9yKCB2YXIgaSA9IDA7IGkgPCAkZWxlbWVudHMubGVuZ3RoOyBpICs9IHNlbGYuc2V0dGluZ3MuY29sICkge1xuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudHMuc2xpY2UoaSwgaSArIHNlbGYuc2V0dGluZ3MuY29sICkud3JhcEFsbChcIjxkaXYgY2xhc3M9J3NsaWRlJz48L2Rpdj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc2VsZi4kd3JhcHBlci5jaGlsZHJlbignLnNsaWRlJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYXNzaWduU2xpZGVzT3JkZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHNlbGYuJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBzbGlkZSkge1xuICAgICAgICAgICAgICAgIHZhciAkc2xpZGUgPSAkKHNsaWRlKTtcblxuICAgICAgICAgICAgICAgIChpbmRleCA9PSBzZWxmLiRzbGlkZXMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgPyAkc2xpZGUuZGF0YSgnbmV4dEluZGV4JywgMClcbiAgICAgICAgICAgICAgICAgICAgOiAkc2xpZGUuZGF0YSgnbmV4dEluZGV4JywgaW5kZXggKyAxKTtcblxuICAgICAgICAgICAgICAgIChpbmRleCA9PSAwKVxuICAgICAgICAgICAgICAgICAgICA/ICRzbGlkZS5kYXRhKCdwcmV2SW5kZXgnLCBzZWxmLiRzbGlkZXMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgOiAkc2xpZGUuZGF0YSgncHJldkluZGV4JywgaW5kZXggLSAxKTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlV3JhcHBlcjogZnVuY3Rpb24oY2xhc3NOYW1lKXtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHNlbGYuJHNsaWRlci53cmFwSW5uZXIoJzxkaXYgY2xhc3M9XCJzbGlkZXJfd3JhcHBlclwiPjwvZGl2PicpO1xuXG4gICAgICAgICAgICByZXR1cm4gc2VsZi4kc2xpZGVyLmZpbmQoJy5zbGlkZXJfd3JhcHBlcicpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlaW5pdDogZnVuY3Rpb24ocGFyYW1zKXtcbiAgICAgICAgICAgIHZhciBzbGlkZXIgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBpZiAoc2xpZGVyLmxlbmd0aCl7XG4gICAgICAgICAgICAvLyAgICAgLy9yZW1vdmUgc2xpZGUgd3JhcHBlclxuICAgICAgICAgICAgLy8gICAgIGlmIChzbGlkZXIuZGF0YSgnY2VsbHMnKSl7XG4gICAgICAgICAgICAvLyAgICAgICAgIHNsaWRlci5maW5kKCcuc2xpZGUgPiAqJykudW53cmFwKCk7XG4gICAgICAgICAgICAvLyAgICAgfVxuXG4gICAgICAgICAgICAvLyAgICAgLy9yZW1vdmUgY29udHJvbHNcbiAgICAgICAgICAgIC8vICAgICBzbGlkZXIuZmluZCgnLnNsaWRlci1jb250cm9sJykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIC8vICAgICAvL3JlbW92ZSByaWJib24gYW5kIGNvbnRlbnRcbiAgICAgICAgICAgIC8vICAgICBzbGlkZXIuZmluZCgnLnNsaWRlci1jb250ZW50JykucmVwbGFjZVdpdGgoc2xpZGVyLmZpbmQoJy5zbGlkZXItcmliYm9uJykuY29udGVudHMoKSk7XG5cbiAgICAgICAgICAgIC8vICAgICBpZiAocGFyYW1zKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgcGFyYW1zID0gJC5wYXJzZUpTT04ocGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAgICAgICAgIC8vc2V0IG5ldyBwYXJhbXNcbiAgICAgICAgICAgIC8vICAgICAgICAgJC5lYWNoKHBhcmFtcywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHNsaWRlci5kYXRhKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vICAgICB9XG5cbiAgICAgICAgICAgIC8vICAgICAvL2luaXRcbiAgICAgICAgICAgIC8vICAgICBzbGlkZXIubG9va1NsaWRlcigpO1xuICAgICAgICAgICAgLy8gfWVsc2V7XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgfTtcblxuJC5mbi5sb29rU2xpZGVyID0gZnVuY3Rpb24oIG1ldGhvZCApIHtcblxuICAgIGlmICggbWV0aG9kc1ttZXRob2RdICkge1xuICAgICAgICByZXR1cm4gbWV0aG9kc1ttZXRob2RdLmFwcGx5KCB0aGlzLmRhdGEoJ2xvb2tTbGlkZXInKSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICEgbWV0aG9kICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNsaWRlciA9IE9iamVjdC5jcmVhdGUoIG1ldGhvZHMgKTtcbiAgICAgICAgICAgIHNsaWRlci5pbml0KCB0aGlzLCBtZXRob2QgKTtcbiAgICAgICAgICAgICQuZGF0YSggdGhpcywgJ2xvb2tTbGlkZXInLCBzbGlkZXIgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgICQuZXJyb3IoICdNZXRob2QgJyArICBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0JyApO1xuICAgIH0gICBcbn07XG5cbn0pKCBqUXVlcnkgKTtcbiAgICAgICAgIiwiXG5cbihmdW5jdGlvbiggJCApIHtcblx0Ly9pbml0IHNsaWRlcnNcblx0JCgnLnNsaWRlcicpLmxvb2tTbGlkZXIoKTtcblxufSkoIGpRdWVyeSApOyJdfQ==
